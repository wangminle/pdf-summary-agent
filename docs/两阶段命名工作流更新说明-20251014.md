# 更新摘要 - 两阶段命名工作流

**日期**: 2025-10-14  
**更新类型**: 工作流增强（必做环节）

## 核心变更

在原有的"脚本提取 → 生成摘要"工作流中，新增**图表重命名**环节，形成完整的两阶段命名工作流。

### 变更概述

```
旧工作流：
PDF → 脚本提取 → 生成摘要
      ↓
    Figure_1_Overview_of_the_proposed_deep_learning.png (12个单词，临时)

新工作流：
PDF → 脚本提取 → AI重命名 → 生成摘要
      ↓            ↓
    临时命名      最终命名
    (12个单词)    (5-15个单词)
    
    Figure_1_Overview_of_the_proposed_deep_learning.png
    → Figure_1_Architecture_Overview.png
```

## 修改的文件

### 1. AGENTS.md（主要修改）

**新增内容**：
- 📋 必做任务清单（第154-246行）
  - **任务1**：图表文件重命名（必做）
  - **任务2**：生成带图摘要（必做）
- 完整工作流示例（4个步骤）
  - 步骤1：脚本提取
  - 步骤2：阅读理解
  - 步骤3：图表重命名（**新增**）
  - 步骤4：生成摘要

**重命名规则**：
- 📏 单词数量：5-15个单词
- 🎯 命名原则：准确、专业、简洁、一致
- 📁 格式：`Figure_N_<新描述>.png`
- ⚠️ 注意事项：保留前缀、使用下划线、避免特殊字符

**示例代码**：
```bash
mv "Figure_1_Overview_of_the_proposed_deep_learning.png" \
   "Figure_1_Multimodal_Architecture_Overview.png"
```

### 2. README.md（更新说明）

**英文版更新**：
- **NEW** 部分：添加两阶段命名工作流说明（第13行）
- CLI 工作流：更新指令，要求AI重命名图表（第47行）
- Agent 步骤：新增重命名步骤示例（第57-62行）
- 验证说明：强调使用新文件名（第76行）

**中文版更新**：
- **新功能**部分：添加两阶段命名工作流说明（第90行）
- CLI 工作流：更新指令，要求AI重命名图表（第124行）
- Agent 步骤：新增重命名步骤示例（第134-139行）
- 验证说明：强调使用新文件名（第154行）

### 3. 新增文档

**docs/two_stage_naming_workflow.md**
- 完整的两阶段命名工作流说明
- 设计理念和工作流详解
- 命名对比示例（4个案例）
- AI Agent 最佳实践
- 批量重命名脚本示例
- 验证检查清单
- 常见问题解答

## 工作流对比

### 旧工作流（单阶段）

```bash
# 1. 脚本提取
python3 scripts/extract_pdf_assets.py --pdf paper.pdf --preset robust

# 输出：
images/Figure_1_Overview_of_the_proposed_deep_learning_architecture_for_multi_modal_feature.png

# 2. 生成摘要（直接使用临时文件名）
# 摘要中：![图1](images/Figure_1_Overview_of_the_proposed_deep_learning_architecture_for_multi_modal_feature.png)
```

**问题**：
- ❌ 文件名冗长，不便识别
- ❌ 基于原始图注，可能包含冗余信息
- ❌ 无法体现图表的核心贡献

### 新工作流（两阶段）

```bash
# 1. 脚本提取（临时命名）
python3 scripts/extract_pdf_assets.py --pdf paper.pdf --preset robust

# 输出临时文件名：
images/Figure_1_Overview_of_the_proposed_deep_learning_architecture_for_multi_modal_feature.png

# 2. AI 阅读理解论文内容
# 读取 text/paper.txt 和查看 images/*.png

# 3. AI 重命名图表（最终命名）
mv "images/Figure_1_Overview_of_the_proposed_deep_learning_architecture_for_multi_modal_feature.png" \
   "images/Figure_1_Multimodal_Architecture_Overview.png"

# 4. 生成摘要（使用新文件名）
# 摘要中：![图1](images/Figure_1_Multimodal_Architecture_Overview.png)
```

**优势**：
- ✅ 文件名简洁专业（12词 → 3-5词）
- ✅ 准确反映核心内容
- ✅ 提升文件管理效率
- ✅ 增强可读性和可维护性

## 命名对比示例

| 图表 | 临时命名（12词） | 最终命名（5-15词） | 单词减少 |
|------|-----------------|------------------|---------|
| Figure 1 | `Figure_1_Overview_of_the_proposed_deep_learning_architecture_for_multi_modal_feature.png` | `Figure_1_Multimodal_Architecture_Overview.png` | 12→3 (75%↓) |
| Figure 2 | `Figure_2_Experimental_results_showing_performance_comparison_on_multiple_benchmark_datasets_including.png` | `Figure_2_Benchmark_Performance_Comparison.png` | 12→3 (75%↓) |
| Figure 3 | `Figure_3_Ablation_study_results_demonstrating_the_impact_of_different_components_on.png` | `Figure_3_Ablation_Study_Results.png` | 12→3 (75%↓) |
| Table 1 | `Table_1_Comparison_of_model_performance_across_different_architectures_and_training.png` | `Table_1_Model_Performance_Metrics.png` | 12→3 (75%↓) |

## 用户指令模板

### 英文版

```text
<paper>.pdf Please follow AGENTS.md in this folder: automatically call scripts/extract_pdf_assets.py to extract the main text and all figures/tables, then RENAME all figure/table PNGs to descriptive filenames (5-15 words) based on paper content, and finally produce a 1500–2400 word Chinese Markdown summary. Embed every figure/table in order using the NEW filenames with relative paths (images/...), add a 1–2 sentence explanation for each, and save as <paper>_阅读摘要-YYYYMMDD.md.
```

### 中文版

```text
<paper>.pdf 请"按本目录的 AGENTS.md"执行摘要任务：自动调用 scripts/extract_pdf_assets.py 提取正文文本与全部图表，然后基于论文内容将所有图表PNG重命名为描述性名称（5-15个单词），最后生成一份 1500–2400 字的中文 Markdown 摘要。请将所有图与表按编号嵌入（使用重命名后的相对路径 images/...），每个元素配 1–2 句精要解释，文件名为 <paper>_阅读摘要-YYYYMMDD.md。
```

## AI Agent 执行检查清单

生成摘要前，确保完成以下步骤：

### 阶段1：提取（自动）
- [x] 安装依赖（pymupdf, pdfminer.six）
- [x] 运行提取脚本
- [x] 确认生成 `text/<paper>.txt`
- [x] 确认生成 `images/*.png`（临时命名）
- [x] 确认生成 `images/index.json`

### 阶段2：重命名（必做）
- [x] 阅读 `text/<paper>.txt` 理解论文内容
- [x] 查看所有 `images/*.png` 理解图表含义
- [x] 为每个图表生成新的描述性名称（5-15个单词）
- [x] 执行批量重命名（使用 `mv` 命令）
- [x] 验证所有文件都已重命名
- [x] 验证新文件名符合命名规则

### 阶段3：生成摘要
- [x] 在摘要中使用**新文件名**嵌入图表
- [x] 为每个图表添加1-2句精要解释
- [x] 确保所有图表路径正确（相对路径 `images/...`）
- [x] 保存为 `<paper>_阅读摘要-YYYYMMDD.md`

### 阶段4：验证
- [x] 在 Markdown 预览中检查所有图表是否正确显示
- [x] 确认使用的是新文件名，不是临时文件名
- [x] 检查图表编号顺序是否正确
- [x] 确认没有遗漏任何图表

## 注意事项

### 重要提醒

1. **必须重命名**：这是必做任务，不是可选项
2. **保留前缀**：重命名时必须保留 `Figure_N_` 或 `Table_N_` 前缀
3. **单词限制**：5-15个单词（不含前缀），不能太短也不能太长
4. **使用新文件名**：摘要中必须使用重命名后的文件名，不能使用临时文件名
5. **批量操作**：建议一次性重命名所有图表，然后再开始写摘要

### 命名建议

**好的命名**：
- ✅ `Figure_1_Architecture_Overview.png`（简洁明了）
- ✅ `Figure_2_Performance_Comparison.png`（核心概念）
- ✅ `Figure_3_Ablation_Study_Results.png`（保留专业术语）
- ✅ `Table_1_Model_Performance_Metrics.png`（准确描述）

**不好的命名**：
- ❌ `Figure_1_Fig.png`（太简短）
- ❌ `Figure_2_Results.png`（太宽泛）
- ❌ `Figure_3_This_figure_shows_our_method.png`（完整句子）
- ❌ `Figure_1_Overview_of_the_proposed_deep_learning_architecture.png`（太长）

## 技术细节

### 为什么是5-15个单词？

- **最少5个单词**：确保足够描述性，避免过于简短和模糊
- **最多15个单词**：保持简洁性，避免冗长难读
- **最佳范围**：3-7个单词最为理想（如示例所示）

### 与脚本默认12个单词的关系

- **脚本12个单词**：基于原始图注的自动截断，作为临时标识
- **AI 5-15个单词**：基于理解后的智能命名，作为最终文件名
- **协同工作**：脚本快速提取 + AI精准命名 = 最佳实践

## 后续工作

### 可能的改进

1. **自动化重命名**：未来可以训练AI模型自动生成最佳文件名
2. **命名模板**：为不同类型的图表提供预定义的命名模板
3. **一致性检查**：自动检查命名是否符合规范和论文术语

### 用户反馈

欢迎用户提供反馈：
- 命名规则是否合理？
- 单词数量限制是否合适？
- 工作流是否流畅？

## 总结

**核心价值**：
- 🚀 **效率提升**：自动提取 + 智能命名
- 📝 **质量保证**：基于理解的专业命名
- 🎯 **用户友好**：简洁易懂的文件名
- 🔄 **工作流优化**：两阶段清晰分工

**关键特点**：
- ✅ 必做环节，不可跳过
- ✅ 5-15个单词的明确规范
- ✅ 完整的工作流指引
- ✅ 丰富的示例和最佳实践

这次更新将文件命名从"自动化"提升到"智能化"，确保生成的图表文件名既准确又专业。

---

**相关文档**：
- `docs/two_stage_naming_workflow.md` - 详细工作流说明
- `docs/filename_word_limit_feature.md` - 脚本命名功能说明
- `AGENTS.md` - Agent 工作指南（已更新）
- `README.md` - 项目说明（已更新）

